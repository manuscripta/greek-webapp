var MultiPageNavigation={locales:{de:{firstPage:"Anfang",lastPage:"Ende"},en:{firstPage:"first",lastPage:"last"}},template:Mirador.Handlebars.compile(['<div class="extendedNav skipPrevious">','<a class="mirador-osd-first hud-control">','<i class="fa fa-chevron-left"></i><span>{{t "firstPage"}}</span>',"</a>",'<a class="mirador-osd-previous-10 hud-control">','<i class="fa fa-chevron-left"></i><span>10</span>',"</a>",'<a class="mirador-osd-previous-5 hud-control">','<i class="fa fa-chevron-left"></i><span>5</span>',"</a>",'<a class="mirador-osd-previous-3 hud-control">','<i class="fa fa-chevron-left"></i><span>3</span>',"</a>","</div>",'<div class="extendedNav skipNext">','<a class="mirador-osd-next-3 hud-control">','<span>3</span><i class="fa fa-chevron-right"></i>',"</a>",'<a class="mirador-osd-next-5 hud-control">','<span>5</span><i class="fa fa-chevron-right"></i>',"</a>",'<a class="mirador-osd-next-10 hud-control">','<span>10</span><i class="fa fa-chevron-right"></i>',"</a>",'<a class="mirador-osd-last hud-control">','<span>{{t "lastPage"}}</span><i class="fa fa-chevron-right"></i>',"</a>","</div>"].join("")),injectToViewer:function(i,t){var e=this.template();0===$(i+" > .extendedNav").length&&$(e).appendTo(i)},addEventHandlersToViewer:function(i){var t=Mirador[i].prototype.bindEvents,e=Mirador[i].prototype.listenForActions;Mirador[i].prototype.bindEvents=function(){t.apply(this,arguments),$(this.element[0]).on("click",".extendedNav > .hud-control",function(i){var t=i.currentTarget.classList[0].split("-").slice(2);this[t[0]].call(this,t[1]-1)}.bind(this))},Mirador[i].prototype.listenForActions=function(){e.apply(this,arguments),this.eventEmitter.subscribe("windowUpdated",function(i,t){t.viewType&&this.handleExtendedNavigation(t.viewType)}.bind(this))}},injectWorkspaceEventHandler:function(){var i=this,t=Mirador.Workspace.prototype.bindEvents;Mirador.Workspace.prototype.bindEvents=function(){var e=this;this.eventEmitter.subscribe("windowUpdated",function(t,s){if(s.viewType){var a=null,o=e.getSlotFromAddress(s.slotAddress).slotID;"ImageView"===s.viewType?a='div[data-layout-slot-id="'+o+'"] .image-view > .mirador-hud':"BookView"===s.viewType&&(a='div[data-layout-slot-id="'+o+'"] .book-view > .mirador-hud'),a&&i.injectToViewer(a,s.viewType)}}),t.apply(this)}},addLocalesToViewer:function(){for(var i in this.locales)i18next.addResources(i,"translation",this.locales[i])},init:function(){Mirador.BookView.prototype.handleExtendedNavigation=this.handleExtendedNavigation,Mirador.ImageView.prototype.handleExtendedNavigation=this.handleExtendedNavigation,Mirador.BookView.prototype.first=Mirador.ImageView.prototype.first=this.first,Mirador.BookView.prototype.last=Mirador.ImageView.prototype.last=this.last,Mirador.BookView.prototype.next=Mirador.ImageView.prototype.next=this.next,Mirador.BookView.prototype.previous=Mirador.ImageView.prototype.previous=this.previous,this.addEventHandlersToViewer("ImageView"),this.addEventHandlersToViewer("BookView"),this.injectWorkspaceEventHandler(),i18next.on("initialized",function(){this.addLocalesToViewer()}.bind(this))},first:function(){this.eventEmitter.publish("SET_CURRENT_CANVAS_ID."+this.windowId,this.imagesList[0]["@id"])},last:function(){this.eventEmitter.publish("SET_CURRENT_CANVAS_ID."+this.windowId,this.imagesList[this.imagesList.length-1]["@id"])},next:function(i){var t=this.currentImgIndex+1+(i||0);this instanceof Mirador.BookView&&(t+=1+(i||0)),t<this.imagesList.length?this.eventEmitter.publish("SET_CURRENT_CANVAS_ID."+this.windowId,this.imagesList[t]["@id"]):this.last()},previous:function(i){var t=this.currentImgIndex-1-(i||0);this instanceof Mirador.BookView&&(t=t-1-(i||0)),t>=0?this.eventEmitter.publish("SET_CURRENT_CANVAS_ID."+this.windowId,this.imagesList[t]["@id"]):this.first()},handleExtendedNavigation:function(i){var t=this.currentImgIndex,e=this.imagesList.length-1,s="ImageView"===i?1:2;0===t?this.element.find(".mirador-osd-first").hide():this.element.find(".mirador-osd-first").show(),t===e?this.element.find(".mirador-osd-last").hide():this.element.find(".mirador-osd-last").show(),[3,5,10].forEach(function(i){t-i*s>=0?this.element.find(".mirador-osd-previous-"+i).show():this.element.find(".mirador-osd-previous-"+i).hide(),t+i*s<=e?this.element.find(".mirador-osd-next-"+i).show():this.element.find(".mirador-osd-next-"+i).hide()}.bind(this))}};$(document).ready(function(){MultiPageNavigation.init()});